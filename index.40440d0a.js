!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n=function(){for(var e=[],t=0;t<T;t++){e.push([]);for(var n=0;n<p;n++)e[t].push(0)}return e},r=function(e,t,n){R[t][n].classList.add("field-cell--".concat(e)),R[t][n].innerText="".concat(e),g[t][n]="".concat(e)},o=function(e,t){S.emptyCells--,r(.1>Math.random()?4:2,e,t)},i=function(){for(;S.emptyCells>=1;)for(var e=Math.floor(Math.random()*T);g[e].includes(0);){var t=Math.floor(Math.random()*p);if(0===g[e][t])return o(e,t)}},a=function(){S.moves=0,S.dontAddCells.map(function(e){return e.classList.remove("notAdd")})},c=function(){S.moves>0&&(i(),S.dontAddCells=t(document.querySelectorAll(".notAdd")))},s=function(){if(!g.some(function(e){return e.includes(0)})&&!g.some(function(e){for(var t=1;t<e.length;t++)if(e[t]===e[t-1])return!0})){for(var e=0;e<g[0].length;e++)for(var t=1;t<g.length;t++)if(g[t][e]===g[t-1][e])return;E.style.opacity=.5,q.classList.add("hidden"),C.classList.remove("hidden")}},l=function(e,t,n,r,o){var i=r?R[e][t]:R[t][e],a=r?R[e][n]:R[n][e],c=i.innerText,s=""+2*Number(c);r?(g[e][t]=0,g[e][n]=o?s:c):(g[t][e]=0,g[n][e]=o?s:c),o&&(a.classList.remove("field-cell--".concat(c)),a.classList.add("notAdd"),S.emptyCells++,w.innerText=Number(w.innerText)+Number(s)),a.classList.add("field-cell--".concat(o?s:c)),a.innerText="".concat(o?s:c),i.classList.remove("field-cell--".concat(c)),i.innerText="",S.moves++,"2048"===a.innerText&&(q.classList.add("hidden"),M.classList.remove("hidden"))},d=function(e,t){switch(!0){case e&&t:for(var n=0;n<=x;n++)for(var r=0;r<=A;r++)if(0!==g[n][r]&&0!==r)for(var o=r-1;o>=0;o--){if(""!==R[n][o].innerText){if(R[n][o].innerText===R[n][r].innerText&&!R[n][o].classList.notAdd){l(n,r,o,!0,!0);break}r!==o+1&&l(n,r,o+1,!0,!1);break}0===o&&l(n,r,o,!0,!1)}break;case e&&!t:for(var i=0;i<=x;i++)for(var a=A;a>=0;a--)if(0!==g[i][a]&&a!==A)for(var c=a+1;c<=A;c++){if(""!==R[i][c].innerText){if(R[i][c].innerText===R[i][a].innerText&&!R[i][c].classList.notAdd){l(i,a,c,!0,!0);break}a!==c-1&&l(i,a,c-1,!0,!1);break}c===A&&l(i,a,c,!0,!1)}break;case!e&&t:for(var s=0;s<=A;s++)for(var d=0;d<=x;d++)if(0!==g[d][s]&&0!==d)for(var u=d-1;u>=0;u--){if(""!==R[u][s].innerText){if(R[u][s].innerText===R[d][s].innerText&&!R[u][s].classList.notAdd){l(s,d,u,!1,!0);break}d!==u+1&&l(s,d,u+1,!1,!1);break}0===u&&l(s,d,u,!1,!1)}break;case!e&&!t:for(var f=0;f<=A;f++)for(var m=x;m>=0;m--)if(0!==g[m][f]&&m!==x)for(var v=m+1;v<=x;v++){if(""!==R[v][f].innerText){if(R[v][f].innerText===R[m][f].innerText&&!R[v][f].classList.notAdd){l(f,m,v,!1,!0);break}m!==v-1&&l(f,m,v-1,!1,!1);break}v===x&&l(f,m,v,!1,!1)}break;default:console.log("Some problem with counting...")}};function u(){a(),d(!0,!0),c(),s()}function f(){a(),d(!0,!1),c(),s()}function m(){a(),d(!1,!1),c(),s()}function v(){a(),d(!1,!0),c(),s()}var h=null,y=null;function b(e){var t=(e.touches||e.originalEvent.touches)[0];h=t.clientX,y=t.clientY}function L(e){if(h&&y){var t=e.touches[0].clientX,n=e.touches[0].clientY,r=h-t,o=y-n;Math.abs(r)>Math.abs(o)?r>0?u():f():o>0?m():v(),h=null,y=null}}var T=4,p=4,x=3,A=3,g=n(),S={emptyCells:T*p,moves:1,dontAddCells:[]},k=document.querySelector(".button"),w=document.querySelector(".game-score"),C=document.querySelector(".message-lose"),M=document.querySelector(".message-win"),q=document.querySelector(".message-start"),E=document.querySelector(".game-field"),R=[];t(document.querySelector("tbody").children).forEach(function(e){R.push(t(e.children))}),k.addEventListener("click",function(){"Restart"===k.innerText&&(S.moves=1,S.emptyCells=T*p,w.innerHTML=0,E.style.opacity=1,R.map(function(e){return e.map(function(e){e.removeAttribute("class"),e.innerText="",e.classList.add("field-cell")})}),g=n(),i(),i()),"Start"===k.innerText&&(i(),i(),k.innerText="Restart",k.classList.remove("start"),k.classList.add("restart"),q.innerText='Press "Restart" to new game',document.addEventListener("keyup",function(e){"ArrowLeft"===e.code&&u(),"ArrowRight"===e.code&&f(),"ArrowDown"===e.code&&m(),"ArrowUp"===e.code&&v()}),document.addEventListener("touchstart",b,!1),document.addEventListener("touchmove",L,!1)),M.classList.add("hidden"),C.classList.add("hidden"),q.classList.remove("hidden")})}();
//# sourceMappingURL=index.40440d0a.js.map
